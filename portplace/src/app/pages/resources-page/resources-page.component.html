<div class="resources-page-layout">
  <div class="resources-content">
    <!-- Breadcrumb -->
    <app-breadcrumb></app-breadcrumb>

    <!-- Header -->
    <div class="page-header">
      <h1>Recursos</h1>
      <p>Gerencie os recursos humanos da organização</p>
    </div>

    <!-- Tabs -->
    <div class="tabs-container">
      <div class="tabs-list">
        <button
          class="tab-trigger"
          [class.active]="activeTab === 'pedidos'"
          (click)="onTabChange('pedidos')">
          <app-svg-icon
            class="nav-icon"
            [path]="'assets/icon/pedido_vetor.svg'"
            [size]="18">
          </app-svg-icon>
          Pedidos de recursos
        </button>
        <button
          class="tab-trigger"
          [class.active]="activeTab === 'pool'"
          (click)="onTabChange('pool')">
          <app-svg-icon
            class="nav-icon"
            [path]="'assets/icon/pool_vetor.svg'"
            [size]="18">
          </app-svg-icon>
          Pool de recursos
        </button>
        <button
          class="tab-trigger"
          [class.active]="activeTab === 'Cargos'"
          (click)="onTabChange('Cargos')">
          <app-svg-icon
            class="nav-icon"
            [path]="'assets/icon/cargos_vetor.svg'"
            [size]="18">
          </app-svg-icon>
          Cargos
        </button>
      </div>

      <!-- Tab Content -->
      <div class="tab-content">
        <resources-request *ngIf="activeTab === 'pedidos'"></resources-request>
        <resources-pool *ngIf="activeTab === 'pool'"></resources-pool>
        <resources-position *ngIf="activeTab === 'Cargos'"></resources-position>
      </div>
    </div>
    <!-- Table -->
    <app-card class="table-card">
      <div class="table-container">
        <div class="div-loading-projetcts" *ngIf="loadingResources">Carregando projetos...</div>
        <table class="Resources-table" *ngIf="!loadingResources">
          <thead>
            <tr>
              <th>
                <div class="header-cell">
                  Nome do projeto
                </div>
              </th>
              <th>
                <div class="header-cell">
                  Portfólio
                </div>
              </th>
              <th>
                <div class="header-cell">
                  Orçamento
                </div>
              </th>
              <th>
                <div class="header-cell">
                  EV
                  <app-svg-icon
                    class="nav-icon"
                    [path]="'assets/icon/sort-alt.svg'"
                    [size]="18">
                  </app-svg-icon>
                </div>
              </th>
              <th>
                <div class="header-cell">
                  PV
                  <app-svg-icon
                    class="nav-icon"
                    [path]="'assets/icon/sort-alt.svg'"
                    [size]="18">
                  </app-svg-icon>
                </div>
              </th>
              <th>
                <div class="header-cell">
                  Início planejado
                  <app-svg-icon
                    class="nav-icon"
                    [path]="'assets/icon/sort-alt.svg'"
                    [size]="18">
                  </app-svg-icon>
                </div>
              </th>
              <th>
                <div class="header-cell">
                  Fim planejado
                  <app-svg-icon
                    class="nav-icon"
                    [path]="'assets/icon/sort-alt.svg'"
                    [size]="18">
                  </app-svg-icon>
                </div>
              </th>
              <th>
                <div class="header-cell">
                  Status
                  <app-svg-icon
                    class="nav-icon"
                    [path]="'assets/icon/sort-alt.svg'"
                    [size]="18">
                  </app-svg-icon>
                </div>
              </th>
            </tr>
          </thead>
          <tbody>


              <tr *ngFor="let project of Resources"
              class="table-row"
              >
              <td>
                <button (click)="onProjectClick(project.id!)" class="project-link">
                  {{ project.name || 'não definido' }}
                </button>
              </td>

              <!-- Portfólio -->
              <td>{{ project.portfolioName || 'não definido' }}</td>

              <td>{{ project.budgetAtCompletion || 'não definido' }}</td>
              <td>{{ project.earnedValue || 'não definido' }}</td>
              <td>{{ project.plannedValue || 'não definido' }}</td>
              <td>{{ project.startDate || 'não definido' }}</td>
              <td>{{ project.endDate || 'não definido' }}</td>
              <td>
                <app-badge [color]="getStatusColor(project.status)">
                  {{ getStatusLabel(project.status) || 'não definido' }}
                </app-badge>
              </td>

            </tr>

          </tbody>
        </table>
      </div>
    </app-card>
  </div>

  <!-- Form Modal -->
  <app-form-modal-component
    [isVisible]="showCreateModal"
    [config]="createResourcesConfig"
    (close)="closeCreateModal()"
    (save)="onSaveProject($event)"
    (cancel)="closeCreateModal()">
  </app-form-modal-component>

</div>
