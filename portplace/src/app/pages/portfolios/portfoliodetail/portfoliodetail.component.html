<div class="portfolio-detail-container">
  <!-- Breadcrumb -->
  <div class="breadcrumb">
    <span>Início</span>
    <span class="separator">></span>
    <span>Portfólios</span>
    <span class="separator">></span>
    <span class="current">Portfólio: {{portfolio?.name}}</span>
  </div>

  <!-- Header -->
  <div class="portfolio-header">
    <div class="header-top">
      <button class="back-btn" (click)="onBack()">
        <i class="icon-arrow-left"></i>
      </button>
      <h1>{{portfolio?.name}}</h1>
      <app-badge color="green">{{portfolio?.status}}</app-badge>
    </div>
    <p class="portfolio-description">{{portfolio?.description}}</p>
    <div class="header-actions">
      <button class="btn-outline" (click)="openEditModal()">
        <i class="icon-edit"></i>
        Editar dados básicos
      </button>
      <button class="btn-outline btn-danger">
        <i class="icon-trash"></i>
        Excluir
      </button>
    </div>
    <p class="last-update">{{portfolio?.lastUpdate}}</p>
  </div>

  <!-- Tabs -->
  <div class="tabs-container">
    <div class="tabs-list">
      <button
        class="tab-trigger"
        [class.active]="activeTab === 'resumo'"
        (click)="onTabChange('resumo')">
        Resumo
      </button>
      <button
        class="tab-trigger"
        [class.active]="activeTab === 'projetos'"
        (click)="onTabChange('projetos')">
        Projetos
      </button>
      <button
        class="tab-trigger"
        [class.active]="activeTab === 'riscos'"
        (click)="onTabChange('riscos')">
        Riscos
        <app-badge color="red">2</app-badge>
      </button>
      <button
        class="tab-trigger"
        [class.active]="activeTab === 'comunicacao'"
        (click)="onTabChange('comunicacao')">
        Comunicação
      </button>
      <button
        class="tab-trigger"
        [class.active]="activeTab === 'responsaveis'"
        (click)="onTabChange('responsaveis')">
        Responsáveis
      </button>
    </div>

    <!-- Tab Content -->
    <div class="tab-content">
      <!-- Resumo Tab -->
      <div *ngIf="activeTab === 'resumo'" class="tab-panel">
        <h3>Resumo do portfólio</h3>
        <p class="tab-description">Clique em um item abaixo para ver mais detalhes.</p>

        <div class="summary-grid">
          <app-card class="summary-card">
            <div class="summary-content">
              <p class="summary-value">R$ 1.000.000,00</p>
              <p class="summary-label">Orçamento</p>
            </div>
          </app-card>

          <app-card class="summary-card">
            <div class="summary-content">
              <div class="status-indicator red"></div>
              <div>
                <p class="summary-title">Atrasado</p>
                <p class="summary-label">Status progresso</p>
              </div>
            </div>
          </app-card>

          <app-card class="summary-card">
            <div class="summary-content">
              <div class="status-indicator red"></div>
              <div>
                <p class="summary-title">Acima do planejado</p>
                <p class="summary-label">Status custo</p>
              </div>
            </div>
          </app-card>

          <app-card class="summary-card">
            <div class="summary-content">
              <p class="summary-title">Estratégia 1</p>
              <p class="summary-label">Estratégia</p>
            </div>
          </app-card>

          <app-card class="summary-card">
            <div class="summary-content">
              <p class="summary-title">Gabriel Martins</p>
              <p class="summary-label">Responsável</p>
            </div>
          </app-card>

          <app-card class="summary-card">
            <div class="summary-content">
              <p class="summary-title">Gabriel Martins</p>
              <p class="summary-label">Responsável</p>
            </div>
          </app-card>
        </div>
      </div>

      <!-- Projetos Tab -->
      <div *ngIf="activeTab === 'projetos'" class="tab-panel">
        <h3>Projetos</h3>
        <p class="tab-description">Confira os projetos que fazem parte deste portfólio.</p>

        <!-- Project Filters -->
        <div class="project-filters">
          <span class="filter-label">Filtros:</span>
          <div class="filter-buttons">
            <button class="filter-btn active">
              <div class="filter-indicator blue"></div>
              Em análise
            </button>
            <button class="filter-btn">Em andamento</button>
            <button class="filter-btn">Finalizado</button>
            <button class="filter-btn">Cancelado</button>
          </div>
        </div>

        <!-- Search -->
        <div class="search-section">
          <div class="search-container">
            <i class="icon-search"></i>
            <input type="text" placeholder="Buscar em todas colunas">
          </div>
        </div>

        <!-- Projects Table -->
        <app-card class="table-card">
          <div class="table-container">
            <table class="projects-table">
              <thead>
                <tr>
                  <th>
                    <div class="header-cell">
                      Nome do projeto
                      <i class="icon-sort"></i>
                    </div>
                  </th>
                  <th>
                    <div class="header-cell">
                      Orçamento
                      <i class="icon-sort"></i>
                    </div>
                  </th>
                  <th>
                    <div class="header-cell">
                      EV
                      <i class="icon-sort"></i>
                    </div>
                  </th>
                  <th>
                    <div class="header-cell">
                      PV
                      <i class="icon-sort"></i>
                    </div>
                  </th>
                  <th>
                    <div class="header-cell">
                      Início planejado
                      <i class="icon-sort"></i>
                    </div>
                  </th>
                  <th>
                    <div class="header-cell">
                      Fim planejado
                      <i class="icon-sort"></i>
                    </div>
                  </th>
                  <th>
                    <div class="header-cell">
                      Status
                      <i class="icon-sort"></i>
                    </div>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let project of projects" class="table-row">
                  <td class="project-name">{{project.name}}</td>
                  <td>{{project.budget}}</td>
                  <td>{{project.ev}}</td>
                  <td>{{project.pv}}</td>
                  <td>{{project.startDate}}</td>
                  <td>{{project.endDate}}</td>
                  <td>
                    <app-badge color="green">{{project.status}}</app-badge>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </app-card>

        <!-- Pagination -->
        <div class="pagination">
          <p class="pagination-info">Mostrando 1 a 2 de 2 registros</p>
          <div class="pagination-controls">
            <button class="pagination-btn" disabled>
              <i class="icon-chevron-left"></i>
            </button>
            <button class="pagination-btn active">1</button>
            <button class="pagination-btn" disabled>
              <i class="icon-chevron-right"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Riscos Tab -->
      <div *ngIf="activeTab === 'riscos'" class="tab-panel">
        <h3>Riscos do portfólio</h3>

        <!-- Actions -->
        <div class="risks-actions">
          <button class="btn-primary" (click)="openRiskModal()">
            <i class="icon-plus"></i>
            Cadastrar
          </button>
          <div class="search-container">
            <i class="icon-search"></i>
            <input type="text" placeholder="Buscar em todas colunas">
          </div>
        </div>

        <!-- Risks Table -->
        <app-card class="table-card">
          <div class="table-container">
            <table class="risks-table">
              <thead>
                <tr>
                  <th>
                    <div class="header-cell">
                      Código
                      <i class="icon-sort"></i>
                    </div>
                  </th>
                  <th>
                    <div class="header-cell">
                      Risco
                      <i class="icon-sort"></i>
                    </div>
                  </th>
                  <th>
                    <div class="header-cell">
                      Probabilidade
                      <i class="icon-sort"></i>
                    </div>
                  </th>
                  <th>
                    <div class="header-cell">
                      Impacto
                      <i class="icon-sort"></i>
                    </div>
                  </th>
                  <th>
                    <div class="header-cell">
                      Severidade
                      <i class="icon-sort"></i>
                    </div>
                  </th>
                  <th>
                    <div class="header-cell">
                      Ocorrências não resolvidas
                      <i class="icon-sort"></i>
                    </div>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let risk of risks" class="table-row">
                  <td>{{risk.code}}</td>
                  <td>
                    <button class="risk-link" (click)="openRiskModal(risk)">
                      {{risk.name}}
                    </button>
                  </td>
                  <td>{{risk.probability}}</td>
                  <td>{{risk.impact}}</td>
                  <td>{{risk.severity}}</td>
                  <td class="text-red">{{risk.unresolvedOccurrences}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </app-card>

        <!-- Pagination -->
        <div class="pagination">
          <p class="pagination-info">Mostrando 1 a 2 de 2 registros</p>
          <div class="pagination-controls">
            <button class="pagination-btn" disabled>
              <i class="icon-chevron-left"></i>
            </button>
            <button class="pagination-btn active">1</button>
            <button class="pagination-btn" disabled>
              <i class="icon-chevron-right"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Other Tabs -->
      <div *ngIf="activeTab === 'comunicacao'" class="tab-panel">
        <div class="empty-state">
          <p>Página de comunicação em desenvolvimento.</p>
        </div>
      </div>

      <div *ngIf="activeTab === 'responsaveis'" class="tab-panel">
        <div class="empty-state">
          <p>Página de responsáveis em desenvolvimento.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Modals -->
  <app-edit-portfolio-modal
    *ngIf="showEditModal"
    [portfolio]="portfolio"
    (close)="closeEditModal()">
  </app-edit-portfolio-modal>

  <app-risk-modal
    *ngIf="showRiskModal"
    [risk]="editingRisk"
    (close)="closeRiskModal()">
  </app-risk-modal>
</div>
